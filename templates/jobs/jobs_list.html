{% extends "base.html" %}

{% block content %}
<div class="can-wrap">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;">
    <h1 class="can-title">Browse Jobs</h1>
    <form method="get" style="min-width:280px;">
      <input class="can-input" type="text" name="q" value="{{ request.GET.q }}" placeholder="Search roles, skills, location…">
    </form>
  </div>

  <div class="can-row">
    {% for job in jobs %}
      <a href="{% url 'job_detail' job.id %}" style="text-decoration:none;color:inherit;">
        <div class="can-card can-pad">
          <div style="display:flex;gap:14px;align-items:center;margin-bottom:8px;">
            {% if job.recruiter.logo %}
              <img src="{{ job.recruiter.logo.url }}" alt="" style="width:42px;height:42px;border-radius:10px;object-fit:cover;border:1px solid var(--border);">
            {% else %}
              <div style="width:42px;height:42px;border-radius:10px;background:var(--chip);border:1px solid var(--border);"></div>
            {% endif %}
            <div>
              <div style="font-weight:700;font-size:18px;">{{ job.title }}</div>
              <div class="can-muted" style="font-size:13px;">
                {{ job.recruiter.recruiter.company_name }} · {{ job.location_city }} {{ job.location_country }}
              </div>
            </div>
          </div>

          <div class="can-chips">
            <span class="can-chip">{{ job.get_job_type_display }}</span>
            <span class="can-chip">{{ job.get_work_mode_display }}</span>
            {% for js in job.job_skills.all|slice:":3" %}
              <span class="can-chip">{{ js.skill.name }}</span>
            {% endfor %}
            {% if job.job_skills.count > 3 %}
              <span class="can-chip">+{{ job.job_skills.count|add:"-3" }}</span>
            {% endif %}
          </div>

          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:14px;">
            <span class="can-muted" style="font-size:12px;">Posted {{ job.posted_at|timesince }} ago</span>
            <span class="can-badge">View →</span>
          </div>
        </div>
      </a>
    {% empty %}
      <div class="can-card can-pad">No jobs yet.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}

