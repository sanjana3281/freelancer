<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Resume – Preview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    @media screen {
      body { background:#0c1218; margin:0; padding:24px; color:#e6eef6; font:15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial;}
      .sheet { max-width: 860px; margin:0 auto; background:#0f1620; border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:24px; }
      .toolbar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
      .toolbar a{ background:#1b2a38; border:1px solid rgba(255,255,255,.12); color:#cfe8ff; padding:8px 12px; border-radius:10px; text-decoration:none; }
      .content{ background:#0c1218; padding:24px; border-radius:12px; }
    }
    @media print {
      body { color:#111; font:12pt/1.35 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial; }
      .toolbar { display:none !important; }
      .sheet { border:none; padding:0; }
      .content { background:#fff; color:#111; }
      a { color:#111; text-decoration:none; }
      h1,h2,h3 { page-break-after: avoid; }
      ul, li, p { page-break-inside: avoid; }
    }
    h1,h2,h3{ margin: 0 0 10px; }
    ul{ margin: 6px 0 10px 18px; }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <div class="sheet">
    <div class="toolbar">
      <h1 style="margin:0">Resume preview</h1>
      <a href="javascript:window.print()">Print / Save as PDF</a>
    </div>

    <div id="content" class="content">Rendering…</div>
  </div>

  <script>
    // IMPORTANT: keep the quotes around the template variable
    const md = "{{ markdown|escapejs }}";   // <-- quoted string
    try {
      const html = (window.marked ? marked.parse(md) : md);
      document.getElementById('content').innerHTML = html;
    } catch (e) {
      document.getElementById('content').innerText = md;
      console.error(e);
    }
  </script>
</body>
</html>
